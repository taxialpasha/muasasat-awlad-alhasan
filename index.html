<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ø´ÙŠØ± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…ØªØ·ÙˆØ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --info-color: #3498db;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --border-radius: 15px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            --gradient-success: linear-gradient(135deg, #56ab2f, #a8e6cf);
            --gradient-warning: linear-gradient(135deg, #f7971e, #ffd200);
            --gradient-error: linear-gradient(135deg, #ff416c, #ff4b2b);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            color: var(--dark-color);
        }

        .main-container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            backdrop-filter: blur(20px);
            overflow: hidden;
        }

        .top-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .top-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .user-info {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }

        .live-time {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            font-weight: bold;
        }

        .nav-container {
            background: white;
            padding: 0 20px;
            border-bottom: 1px solid #e1e8ed;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            padding: 15px 0;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 12px 20px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .tab-btn.active {
            background: var(--gradient-success);
            transform: translateY(-2px);
        }

        .content-container {
            padding: 20px;
            min-height: calc(100vh - 300px);
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-primary);
            color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .stat-change {
            font-size: 0.9em;
            margin-top: 5px;
            opacity: 0.8;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 25px;
            box-shadow: var(--box-shadow);
            border: 1px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1e8ed;
        }

        .card-title {
            font-size: 1.4em;
            font-weight: bold;
            color: var(--dark-color);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .form-section {
            background: #f8f9fb;
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid #e1e8ed;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--dark-color);
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-size: 14px;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-success {
            background: var(--gradient-success);
            color: white;
        }

        .btn-warning {
            background: var(--gradient-warning);
            color: white;
        }

        .btn-danger {
            background: var(--gradient-error);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info-color), #5dade2);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 12px;
        }

        .btn-lg {
            padding: 15px 30px;
            font-size: 16px;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        th, td {
            padding: 15px 12px;
            text-align: right;
            border-bottom: 1px solid #e1e8ed;
            font-size: 14px;
        }

        th {
            background: var(--gradient-primary);
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
        }

        tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        tr:nth-child(even) {
            background: rgba(248, 249, 251, 0.5);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 3% auto;
            padding: 25px;
            border-radius: var(--border-radius);
            width: 95%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: var(--error-color);
        }

        .search-container {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 25px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
            font-size: 18px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            border: 2px solid #e1e8ed;
            border-radius: var(--border-radius);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }

        .product-card:hover::before {
            left: 100%;
        }

        .product-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .product-card.selected {
            border-color: var(--success-color);
            background: rgba(39, 174, 96, 0.05);
        }

        .product-image {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            color: var(--primary-color);
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 3000;
            animation: slideInLeft 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 400px;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-active { background: var(--success-color); color: white; }
        .status-pending { background: var(--warning-color); color: white; }
        .status-completed { background: var(--info-color); color: white; }
        .status-cancelled { background: var(--error-color); color: white; }
        .status-low-stock { background: var(--error-color); color: white; animation: pulse 2s infinite; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .currency {
            color: var(--success-color);
            font-weight: bold;
        }

        .progress-container {
            background: #e1e8ed;
            border-radius: 10px;
            overflow: hidden;
            height: 8px;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-success);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .tabs-secondary {
            display: flex;
            border-bottom: 1px solid #e1e8ed;
            margin-bottom: 20px;
        }

        .tab-secondary {
            padding: 15px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #666;
        }

        .tab-secondary.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .analytics-chart {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: var(--box-shadow);
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }

        .filter-section {
            background: #f8f9fb;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            border: 1px solid #e1e8ed;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            align-items: end;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease;
            z-index: 1500;
            overflow-y: auto;
        }

        .sidebar.active {
            right: 0;
        }

        .sidebar-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .sidebar-content {
            padding: 20px;
        }

        .floating-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        @media (max-width: 768px) {
            .main-container {
                margin: 5px;
                border-radius: 10px;
            }
            
            .content-container {
                padding: 15px;
            }
            
            .nav-tabs {
                flex-direction: column;
                align-items: stretch;
            }
            
            .tab-btn {
                margin: 2px 0;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 98%;
                margin: 2% auto;
            }
            
            .user-info,
            .live-time {
                position: static;
                display: inline-block;
                margin: 5px;
            }
            
            .top-header {
                text-align: center;
            }
            
            .sidebar {
                width: 100%;
                right: -100%;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark-color);
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .tooltip:hover::after {
            opacity: 1;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            font-size: 11px;
            font-weight: bold;
            border-radius: 12px;
            text-transform: uppercase;
        }

        .badge-primary { background: var(--primary-color); color: white; }
        .badge-success { background: var(--success-color); color: white; }
        .badge-warning { background: var(--warning-color); color: white; }
        .badge-danger { background: var(--error-color); color: white; }
        .badge-info { background: var(--info-color); color: white; }

        .accordion {
            border: 1px solid #e1e8ed;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .accordion-header {
            background: #f8f9fb;
            padding: 15px 20px;
            cursor: pointer;
            transition: background 0.3s ease;
            border-bottom: 1px solid #e1e8ed;
            font-weight: bold;
        }

        .accordion-header:hover {
            background: #e9ecef;
        }

        .accordion-content {
            padding: 20px;
            display: none;
        }

        .accordion-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
        <div class="top-header">
            <div class="user-info">
                <span id="currentUser">ğŸ‘¤ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…</span>
            </div>
            <h1>ğŸª Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ø´ÙŠØ± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…ØªØ·ÙˆØ±</h1>
            <div class="live-time" id="liveTime"></div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
        <div class="nav-container">
            <div class="nav-tabs">
                <button class="tab-btn active" onclick="showTab('dashboard')">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
                <button class="tab-btn" onclick="showTab('pos')">ğŸ’° Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹</button>
                <button class="tab-btn" onclick="showTab('products')">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
                <button class="tab-btn" onclick="showTab('inventory')">ğŸ¬ Ø§Ù„Ù…Ø®Ø§Ø²Ù†</button>
                <button class="tab-btn" onclick="showTab('customers')">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
                <button class="tab-btn" onclick="showTab('suppliers')">ğŸšš Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</button>
                <button class="tab-btn" onclick="showTab('installments')">ğŸ“… Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</button>
                <button class="tab-btn" onclick="showTab('sales')">ğŸ“ˆ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
                <button class="tab-btn" onclick="showTab('returns')">â†©ï¸ Ø§Ù„Ù…Ø±ØªØ¬Ø¹Ø§Øª</button>
                <button class="tab-btn" onclick="showTab('expenses')">ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
                <button class="tab-btn" onclick="showTab('reports')">ğŸ“‹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
                <button class="tab-btn" onclick="showTab('accounting')">ğŸ’¼ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</button>
                <button class="tab-btn" onclick="showTab('users')">ğŸ‘¨â€ğŸ’¼ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</button>
                <button class="tab-btn" onclick="showTab('settings')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            </div>
        </div>

        <div class="content-container">
            <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="todaySales">0</div>
                        <div class="stat-label">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                        <div class="stat-change">+12% Ù…Ù† Ø£Ù…Ø³</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="monthSales">0</div>
                        <div class="stat-label">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±</div>
                        <div class="stat-change">+8% Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalProducts">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                        <div class="stat-change">ØªÙ… Ø¥Ø¶Ø§ÙØ© 5 Ù…Ù†ØªØ¬Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="lowStockAlert">0</div>
                        <div class="stat-label">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                        <div class="stat-change">ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ¬Ø¯ÙŠØ¯</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeCustomers">0</div>
                        <div class="stat-label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙˆÙ†</div>
                        <div class="stat-change">+15 Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingInstallments">0</div>
                        <div class="stat-label">Ø£Ù‚Ø³Ø§Ø· Ù…Ø¹Ù„Ù‚Ø©</div>
                        <div class="stat-change">Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div>
                    </div>
                </div>

                <div class="grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ“ˆ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
                        </div>
                        <div class="analytics-chart">
                            <p>Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ù‡Ù†Ø§</p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ”” Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
                        </div>
                        <div id="alertsList">
                            <div class="alert alert-warning">âš ï¸ Ù…Ù†ØªØ¬ "Ù„Ø§Ø¨ØªÙˆØ¨ Ø¯ÙŠÙ„" ÙˆØµÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</div>
                            <div class="alert alert-info">â„¹ï¸ Ù…ÙˆØ¹Ø¯ Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ù‚Ø³Ø· Ø§Ù„Ø¹Ù…ÙŠÙ„ "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯" ØºØ¯Ø§Ù‹</div>
                            <div class="alert alert-success">âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø´Ø­Ù†Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ "Ø´Ø±ÙƒØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ©"</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹</h3>
                    </div>
                    <div class="table-container">
                        <table id="topProductsTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                    <th>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</th>
                                    <th>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</th>
                                    <th>Ø§Ù„Ù†Ø³Ø¨Ø©</th>
                                </tr>
                            </thead>
                            <tbody id="topProductsBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹ -->
            <div id="pos" class="tab-content">
                <div class="grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸª Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØ¬Ø±</h3>
                        </div>
                        <div class="form-group">
                            <select id="storeType" onchange="updateStoreSettings()">
                                <option value="general">Ù…ØªØ¬Ø± Ø¹Ø§Ù…</option>
                                <option value="clothes">Ù…ØªØ¬Ø± Ù…Ù„Ø§Ø¨Ø³</option>
                                <option value="supermarket">Ø³ÙˆØ¨Ø± Ù…Ø§Ø±ÙƒØª</option>
                                <option value="electronics">Ø£Ø¬Ù‡Ø²Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</option>
                                <option value="mobile">Ù…ØªØ¬Ø± Ù‡ÙˆØ§ØªÙ</option>
                                <option value="pharmacy">ØµÙŠØ¯Ù„ÙŠØ©</option>
                                <option value="books">Ù…ÙƒØªØ¨Ø©</option>
                                <option value="furniture">Ø£Ø«Ø§Ø«</option>
                                <option value="jewelry">Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª</option>
                                <option value="cosmetics">Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„</option>
                                <option value="sports">Ø£Ø¯ÙˆØ§Øª Ø±ÙŠØ§Ø¶ÙŠØ©</option>
                                <option value="toys">Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø·ÙØ§Ù„</option>
                            </select>
                        </div>

                        <div class="card-header">
                            <h3 class="card-title">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                        </div>
                        <div class="search-container">
                            <input type="text" id="productSearch" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ØŒ Ø£Ùˆ Ø§Ù„ÙØ¦Ø©..." oninput="searchProducts()">
                            <span class="search-icon">ğŸ”</span>
                        </div>

                        <div class="filter-section">
                            <div class="filter-row">
                                <div class="form-group">
                                    <label>Ø§Ù„ÙØ¦Ø©</label>
                                    <select id="categoryFilter" onchange="filterProductsByCategory()">
                                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±</label>
                                    <select id="priceRange" onchange="filterProductsByPrice()">
                                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</option>
                                        <option value="0-50000">Ø£Ù‚Ù„ Ù…Ù† 50,000 Ø¯.Ø¹</option>
                                        <option value="50000-200000">50,000 - 200,000 Ø¯.Ø¹</option>
                                        <option value="200000-500000">200,000 - 500,000 Ø¯.Ø¹</option>
                                        <option value="500000+">Ø£ÙƒØ«Ø± Ù…Ù† 500,000 Ø¯.Ø¹</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø­Ø§Ù„Ø©</label>
                                    <select id="stockFilter" onchange="filterProductsByStock()">
                                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</option>
                                        <option value="available">Ù…ØªÙˆÙØ±</option>
                                        <option value="low">Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶</option>
                                        <option value="out">ØºÙŠØ± Ù…ØªÙˆÙØ±</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="product-grid" id="productGrid">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‡Ù†Ø§ -->
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">ğŸ›’ Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
                            <button class="btn btn-warning btn-sm" onclick="openCustomerModal()">Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„</button>
                        </div>
                        
                        <div id="selectedCustomer" class="customer-info" style="display: none;">
                            <div class="alert alert-info">
                                <strong>Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø¯Ø¯:</strong> <span id="customerName"></span>
                                <button class="btn btn-sm btn-danger" onclick="clearSelectedCustomer()">Ø¥Ù„ØºØ§Ø¡</button>
                            </div>
                        </div>

                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                        <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                        <th>Ø§Ù„Ø®ØµÙ…</th>
                                        <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                                        <th>Ø­Ø°Ù</th>
                                    </tr>
                                </thead>
                                <tbody id="cartItems">
                                </tbody>
                            </table>
                        </div>

                        <div style="margin-top: 20px;">
                            <div class="form-section">
                                <div class="form-group">
                                    <label>Ø®ØµÙ… Ø¥Ø¶Ø§ÙÙŠ (%)</label>
                                    <input type="number" id="totalDiscount" value="0" min="0" max="100" oninput="updateCartTotal()">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© (%)</label>
                                    <input type="number" id="taxRate" value="0" min="0" max="50" oninput="updateCartTotal()">
                                </div>
                            </div>

                            <div style="background: #f8f9fb; padding: 20px; border-radius: 10px; margin: 15px 0;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
                                    <span id="subtotal" class="currency">0 Ø¯.Ø¹</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Ø§Ù„Ø®ØµÙ…:</span>
                                    <span id="discountAmount" class="currency">0 Ø¯.Ø¹</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span>
                                    <span id="taxAmount" class="currency">0 Ø¯.Ø¹</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 1.2em; font-weight: bold; border-top: 2px solid #e1e8ed; padding-top: 10px;">
                                    <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</span>
                                    <span id="totalAmount" class="currency">0 Ø¯.Ø¹</span>
                                </div>
                            </div>

                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="btn btn-success btn-lg" onclick="processCashSale()">ğŸ’° Ø¨ÙŠØ¹ Ù†Ù‚Ø¯ÙŠ</button>
                                <button class="btn btn-warning btn-lg" onclick="showInstallmentModal()">ğŸ“… Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</button>
                                <button class="btn btn-info btn-lg" onclick="saveQuote()">ğŸ“„ Ø­ÙØ¸ ÙƒØ¹Ø±Ø¶ Ø³Ø¹Ø±</button>
                                <button class="btn btn-danger" onclick="clearCart()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø¹Ø±Ø¨Ø©</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
            <div id="products" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                        <button class="btn btn-info" onclick="showBulkAddModal()">Ø¥Ø¶Ø§ÙØ© Ù…ØªØ¹Ø¯Ø¯Ø©</button>
                    </div>
                    
                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                        </div>
                        <div class="accordion-content active">
                            <div class="grid">
                                <div class="form-group">
                                    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *</label>
                                    <input type="text" id="productName" required>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</label>
                                    <input type="text" id="productBarcode">
                                    <small>Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø§Ø±ÙƒÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ ØªÙØ±Ùƒ ÙØ§Ø±ØºØ§Ù‹</small>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© *</label>
                                    <select id="mainCategory" onchange="updateSubCategories()">
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                                        <option value="electronics">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                                        <option value="clothes">Ù…Ù„Ø§Ø¨Ø³</option>
                                        <option value="food">Ø·Ø¹Ø§Ù… ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª</option>
                                        <option value="health">ØµØ­Ø© ÙˆØ¬Ù…Ø§Ù„</option>
                                        <option value="home">Ù…Ù†Ø²Ù„ ÙˆØ­Ø¯ÙŠÙ‚Ø©</option>
                                        <option value="sports">Ø±ÙŠØ§Ø¶Ø©</option>
                                        <option value="books">ÙƒØªØ¨</option>
                                        <option value="toys">Ø£Ù„Ø¹Ø§Ø¨</option>
                                        <option value="automotive">Ø³ÙŠØ§Ø±Ø§Øª</option>
                                        <option value="jewelry">Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„ÙØ¦Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ©</label>
                                    <select id="subCategory">
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ©</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©</label>
                                    <input type="text" id="productBrand">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label>
                                    <input type="text" id="productModel">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            Ø§Ù„ØªØ³Ø¹ÙŠØ± ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†
                        </div>
                        <div class="accordion-content">
                            <div class="grid">
                                <div class="form-group">
                                    <label>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ *</label>
                                    <input type="number" id="costPrice" oninput="calculateProfitMargin()">
                                </div>
                                <div class="form-group">
                                    <label>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ *</label>
                                    <input type="number" id="salePrice" oninput="calculateProfitMargin()">
                                </div>
                                <div class="form-group">
                                    <label>Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ (%)</label>
                                    <input type="number" id="profitMargin" readonly>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø¹Ø±</label>
                                    <input type="number" id="minPrice">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø«Ø§Ø¨Øª</label>
                                    <input type="number" id="fixedStock" value="0">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ù…ØªØ­Ø±Ùƒ *</label>
                                    <input type="number" id="movingStock" required>
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</label>
                                    <input type="number" id="minStock" value="5">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†</label>
                                    <input type="number" id="maxStock">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion">
                        <div class="accordion-header" onclick="toggleAccordion(this)">
                            Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                        </div>
                        <div class="accordion-content">
                            <div class="grid">
                                <div class="form-group">
                                    <label>Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)</label>
                                    <input type="number" id="productWeight" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label>Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø§Ù„Ø·ÙˆÙ„ Ã— Ø§Ù„Ø¹Ø±Ø¶ Ã— Ø§Ù„Ø§Ø±ØªÙØ§Ø¹)</label>
                                    <input type="text" id="productDimensions" placeholder="10 Ã— 20 Ã— 5 Ø³Ù…">
                                </div>
                                <div class="form-group">
                                    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</label>
                                    <input type="date" id="expiryDate">
                                </div>
                                <div class="form-group">
                                    <label>Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ±Ø¯</label>
                                    <select id="supplierId">
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ†</label>
                                    <input type="text" id="storageLocation" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø±Ù Ø£Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
                                </div>
                                <div class="form-group">
                                    <label>Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬</label>
                                    <select id="productStatus">
                                        <option value="active">Ù†Ø´Ø·</option>
                                        <option value="inactive">ØºÙŠØ± Ù†Ø´Ø·</option>
                                        <option value="discontinued">Ù…ØªÙˆÙ‚Ù</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</label>
                                <textarea id="productDescription" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                                <textarea id="productNotes" rows="2"></textarea>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-lg" onclick="addProduct()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                        <div class="quick-actions">
                            <button class="btn btn-success btn-sm" onclick="exportProducts()">ğŸ“¤ ØªØµØ¯ÙŠØ±</button>
                            <button class="btn btn-info btn-sm" onclick="showImportModal()">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
                            <button class="btn btn-warning btn-sm" onclick="bulkEdit()">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ù…ØªØ¹Ø¯Ø¯</button>
                        </div>
                    </div>

                    <div class="filter-section">
                        <div class="filter-row">
                            <div class="form-group">
                                <label>Ø§Ù„Ø¨Ø­Ø«</label>
                                <input type="text" id="productFilter" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª..." oninput="filterProducts()">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„ÙØ¦Ø©</label>
                                <select id="categoryFilterProducts" onchange="filterProducts()">
                                    <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø­Ø§Ù„Ø©</label>
                                <select id="statusFilterProducts" onchange="filterProducts()">
                                    <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                                    <option value="active">Ù†Ø´Ø·</option>
                                    <option value="inactive">ØºÙŠØ± Ù†Ø´Ø·</option>
                                    <option value="low-stock">Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label></label>
                                <button class="btn btn-primary" onclick="applyFilters()">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±</button>
                            </div>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="productsTable">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                                    <th>Ø§Ù„ØµÙˆØ±Ø©</th>
                                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                                    <th>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯</th>
                                    <th>Ø§Ù„ÙØ¦Ø©</th>
                                    <th>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>
                                    <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
                                    <th>Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø«Ø§Ø¨Øª</th>
                                    <th>Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ù…ØªØ­Ø±Ùƒ</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
            <div id="customers" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ‘¤ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h3>
                    </div>
                    <div class="grid">
                        <div class="form-group">
                            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                            <input type="text" id="customerFullName" required>
                        </div>
                        <div class="form-group">
                            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                            <input type="tel" id="customerPhone" required>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                            <input type="email" id="customerEmail">
                        </div>
                        <div class="form-group">
                            <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
                            <input type="date" id="customerBirthdate">
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ø¬Ù†Ø³</label>
                            <select id="customerGender">
                                <option value="">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</option>
                                <option value="male">Ø°ÙƒØ±</option>
                                <option value="female">Ø£Ù†Ø«Ù‰</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
                            <select id="customerType">
                                <option value="regular">Ø¹Ø§Ø¯ÙŠ</option>
                                <option value="vip">Ù…Ù…ÙŠØ²</option>
                                <option value="wholesale">ØªØ§Ø¬Ø± Ø¬Ù…Ù„Ø©</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                        <textarea id="customerAddress" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                        <textarea id="customerNotes" rows="2"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="addCustomer()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
                    </div>
                    <div class="search-container">
                        <input type="text" id="customerSearch" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„..." oninput="searchCustomers()">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                    <div class="table-container">
                        <table id="customersTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                                    <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                                    <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                    <th>Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡</th>
                                    <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</th>
                                    <th>Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="customersTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† -->
            <div id="suppliers" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸšš Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯</h3>
                    </div>
                    <div class="grid">
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© *</label>
                            <input type="text" id="supplierCompany" required>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</label>
                            <input type="text" id="supplierContact">
                        </div>
                        <div class="form-group">
                            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                            <input type="tel" id="supplierPhone" required>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                            <input type="email" id="supplierEmail">
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ</label>
                            <input type="text" id="supplierTaxNumber">
                        </div>
                        <div class="form-group">
                            <label>ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ÙˆØ±Ø¯</label>
                            <select id="supplierRating">
                                <option value="5">â­â­â­â­â­ Ù…Ù…ØªØ§Ø²</option>
                                <option value="4">â­â­â­â­ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹</option>
                                <option value="3" selected>â­â­â­ Ø¬ÙŠØ¯</option>
                                <option value="2">â­â­ Ù…Ù‚Ø¨ÙˆÙ„</option>
                                <option value="1">â­ Ø¶Ø¹ÙŠÙ</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                        <textarea id="supplierAddress" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                        <textarea id="supplierNotes" rows="2"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="addSupplier()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ±Ø¯</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</h3>
                    </div>
                    <div class="table-container">
                        <table id="suppliersTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ø´Ø±ÙƒØ©</th>
                                    <th>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</th>
                                    <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                                    <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                                    <th>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</th>
                                    <th>Ø¢Ø®Ø± Ø·Ù„Ø¨ÙŠØ©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="suppliersTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø³ØªÙƒÙˆÙ† Ù…Ø´Ø§Ø¨Ù‡Ø© Ø¨Ù†ÙØ³ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ·ÙˆØ± -->
            <!-- Ø³Ø£Ø¶ÙŠÙ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© -->

            <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
            <div id="settings" class="tab-content">
                <div class="tabs-secondary">
                    <button class="tab-secondary active" onclick="showSettingsTab('general')">Ø¹Ø§Ù…</button>
                    <button class="tab-secondary" onclick="showSettingsTab('pos')">Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹</button>
                    <button class="tab-secondary" onclick="showSettingsTab('inventory')">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
                    <button class="tab-secondary" onclick="showSettingsTab('financial')">Ù…Ø§Ù„ÙŠ</button>
                    <button class="tab-secondary" onclick="showSettingsTab('notifications')">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</button>
                    <button class="tab-secondary" onclick="showSettingsTab('backup')">Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</button>
                    <button class="tab-secondary" onclick="showSettingsTab('advanced')">Ù…ØªÙ‚Ø¯Ù…</button>
                </div>

                <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
                <div id="general-settings" class="settings-content active">
                    <div class="grid">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">ğŸª Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±</h3>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±</label>
                                <input type="text" id="storeName" value="Ù…ØªØ¬Ø±ÙŠ">
                            </div>
                            <div class="form-group">
                                <label>Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± (URL)</label>
                                <input type="url" id="storeLogo">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                                <textarea id="storeAddress" rows="2"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                                <input type="tel" id="storePhone">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <input type="email" id="storeEmail">
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <input type="url" id="storeWebsite">
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">ğŸŒ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©</h3>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ø¹Ù…Ù„Ø©</label>
                                <select id="currency">
                                    <option value="IQD">Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ (Ø¯.Ø¹)</option>
                                    <option value="USD">Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ ($)</option>
                                    <option value="EUR">ÙŠÙˆØ±Ùˆ (â‚¬)</option>
                                    <option value="SAR">Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (Ø±.Ø³)</option>
                                    <option value="AED">Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ (Ø¯.Ø¥)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ù„ØºØ©</label>
                                <select id="language">
                                    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                                    <option value="en">English</option>
                                    <option value="ku">Ú©ÙˆØ±Ø¯ÛŒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©</label>
                                <select id="timezone">
                                    <option value="Asia/Baghdad">Ø¨ØºØ¯Ø§Ø¯ (UTC+3)</option>
                                    <option value="Asia/Riyadh">Ø§Ù„Ø±ÙŠØ§Ø¶ (UTC+3)</option>
                                    <option value="Asia/Dubai">Ø¯Ø¨ÙŠ (UTC+4)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                                <select id="dateFormat">
                                    <option value="DD/MM/YYYY">ÙŠÙˆÙ…/Ø´Ù‡Ø±/Ø³Ù†Ø©</option>
                                    <option value="MM/DD/YYYY">Ø´Ù‡Ø±/ÙŠÙˆÙ…/Ø³Ù†Ø©</option>
                                    <option value="YYYY-MM-DD">Ø³Ù†Ø©-Ø´Ù‡Ø±-ÙŠÙˆÙ…</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ø¨Ø§Ù‚ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ù…Ø§Ù„ÙŠ -->
                <!-- Ø³Ø£Ø¶ÙŠÙ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© -->
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© -->
    <button class="floating-btn" onclick="showQuickActions()" title="Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©">âš¡</button>

    <!-- Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
    <div id="customerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('customerModal')">&times;</span>
            <h2>Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„</h2>
            <div class="search-container">
                <input type="text" id="customerModalSearch" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„..." oninput="searchCustomersModal()">
                <span class="search-icon">ğŸ”</span>
            </div>
            <div id="customersList" style="max-height: 400px; overflow-y: auto;">
                <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
            </div>
            <button class="btn btn-primary" onclick="openNewCustomerModal()">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø· -->
    <div id="installmentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('installmentModal')">&times;</span>
            <h2>Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</h2>
            <!-- Ù…Ø­ØªÙˆÙ‰ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø· -->
        </div>
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let customers = JSON.parse(localStorage.getItem('customers')) || [];
        let suppliers = JSON.parse(localStorage.getItem('suppliers')) || [];
        let sales = JSON.parse(localStorage.getItem('sales')) || [];
        let installmentSales = JSON.parse(localStorage.getItem('installmentSales')) || [];
        let returns = JSON.parse(localStorage.getItem('returns')) || [];
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        let cart = [];
        let selectedCustomer = null;
        let currentStoreType = 'general';
        let settings = JSON.parse(localStorage.getItem('settings')) || {};

        // Ø§Ù„ÙØ¦Ø§Øª ÙˆØ§Ù„ÙØ¦Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©
        const categoryStructure = {
            electronics: {
                name: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª',
                subcategories: ['Ù‡ÙˆØ§ØªÙ Ø°ÙƒÙŠØ©', 'Ø£Ø¬Ù‡Ø²Ø© ÙƒÙ…Ø¨ÙŠÙˆØªØ±', 'ØªÙ„ÙØ²ÙŠÙˆÙ†Ø§Øª', 'Ø£Ø¬Ù‡Ø²Ø© ØµÙˆØª', 'ÙƒØ§Ù…ÙŠØ±Ø§Øª', 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª']
            },
            clothes: {
                name: 'Ù…Ù„Ø§Ø¨Ø³',
                subcategories: ['Ù…Ù„Ø§Ø¨Ø³ Ø±Ø¬Ø§Ù„ÙŠ', 'Ù…Ù„Ø§Ø¨Ø³ Ù†Ø³Ø§Ø¦ÙŠ', 'Ù…Ù„Ø§Ø¨Ø³ Ø£Ø·ÙØ§Ù„', 'Ø£Ø­Ø°ÙŠØ©', 'Ø­Ù‚Ø§Ø¦Ø¨', 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª']
            },
            food: {
                name: 'Ø·Ø¹Ø§Ù… ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª',
                subcategories: ['Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©', 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', 'Ø­Ù„ÙˆÙŠØ§Øª', 'Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¬Ù…Ø¯Ø©', 'Ø®Ø¶Ø§Ø± ÙˆÙÙˆØ§ÙƒÙ‡', 'Ù„Ø­ÙˆÙ…']
            },
            health: {
                name: 'ØµØ­Ø© ÙˆØ¬Ù…Ø§Ù„',
                subcategories: ['Ø£Ø¯ÙˆÙŠØ©', 'Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„', 'Ø¹Ù†Ø§ÙŠØ© Ø´Ø®ØµÙŠØ©', 'ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª', 'Ø£Ø¹Ø´Ø§Ø¨ Ø·Ø¨ÙŠØ©', 'Ø£Ø¬Ù‡Ø²Ø© Ø·Ø¨ÙŠØ©']
            },
            home: {
                name: 'Ù…Ù†Ø²Ù„ ÙˆØ­Ø¯ÙŠÙ‚Ø©',
                subcategories: ['Ø£Ø«Ø§Ø«', 'Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©', 'Ø¯ÙŠÙƒÙˆØ±', 'Ø£Ø¯ÙˆØ§Øª Ø­Ø¯ÙŠÙ‚Ø©', 'Ø¥Ø¶Ø§Ø¡Ø©', 'Ù…Ù†Ø³ÙˆØ¬Ø§Øª']
            },
            sports: {
                name: 'Ø±ÙŠØ§Ø¶Ø©',
                subcategories: ['Ù…Ù„Ø§Ø¨Ø³ Ø±ÙŠØ§Ø¶ÙŠØ©', 'Ø£Ø¬Ù‡Ø²Ø© ØªÙ…Ø§Ø±ÙŠÙ†', 'ÙƒØ±Ø© Ù‚Ø¯Ù…', 'ÙƒØ±Ø© Ø³Ù„Ø©', 'Ø³Ø¨Ø§Ø­Ø©', 'Ø±ÙŠØ§Ø¶Ø§Øª Ø£Ø®Ø±Ù‰']
            },
            books: {
                name: 'ÙƒØªØ¨',
                subcategories: ['ÙƒØªØ¨ Ø¯ÙŠÙ†ÙŠØ©', 'ÙƒØªØ¨ Ø¹Ù„Ù…ÙŠØ©', 'Ø±ÙˆØ§ÙŠØ§Øª', 'ÙƒØªØ¨ Ø£Ø·ÙØ§Ù„', 'Ù‚ÙˆØ§Ù…ÙŠØ³', 'Ù…Ø¬Ù„Ø§Øª']
            },
            toys: {
                name: 'Ø£Ù„Ø¹Ø§Ø¨',
                subcategories: ['Ø£Ù„Ø¹Ø§Ø¨ ØªØ¹Ù„ÙŠÙ…ÙŠØ©', 'Ø£Ù„Ø¹Ø§Ø¨ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©', 'Ø¯Ù…Ù‰', 'Ø£Ù„Ø¹Ø§Ø¨ Ø±ÙŠØ§Ø¶ÙŠØ©', 'Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø§Ø¡', 'Ø£Ù„Ø¹Ø§Ø¨ ÙÙ†ÙŠØ©']
            },
            automotive: {
                name: 'Ø³ÙŠØ§Ø±Ø§Øª',
                subcategories: ['Ù‚Ø·Ø¹ ØºÙŠØ§Ø±', 'Ø²ÙŠÙˆØª ÙˆÙ…ÙˆØ§Ø¯ Ø§Ù„ØªØ´Ø­ÙŠÙ…', 'Ø¥Ø·Ø§Ø±Ø§Øª', 'Ø¨Ø·Ø§Ø±ÙŠØ§Øª', 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', 'Ø£Ø¯ÙˆØ§Øª']
            },
            jewelry: {
                name: 'Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª',
                subcategories: ['Ø°Ù‡Ø¨', 'ÙØ¶Ø©', 'Ø£Ù„Ù…Ø§Ø³', 'Ø³Ø§Ø¹Ø§Øª', 'Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª Ù…Ù‚Ù„Ø¯Ø©', 'Ù‡Ø¯Ø§ÙŠØ§']
            }
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        window.onload = function() {
            updateLiveTime();
            setInterval(updateLiveTime, 1000);
            loadAllData();
            updateDashboard();
            applySettings();
            loadCategories();
        };

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
        function updateLiveTime() {
            const now = new Date();
            const timeString = now.toLocaleString('ar-IQ', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('liveTime').textContent = timeString;
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function showTab(tabName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
            switch(tabName) {
                case 'dashboard':
                    updateDashboard();
                    break;
                case 'pos':
                    loadProductsForPOS();
                    break;
                case 'products':
                    loadProductsTable();
                    break;
                case 'customers':
                    loadCustomersTable();
                    break;
                case 'suppliers':
                    loadSuppliersTable();
                    break;
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function loadAllData() {
            loadProductsForPOS();
            loadProductsTable();
            loadCustomersTable();
            loadSuppliersTable();
        }

        // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function updateDashboard() {
            // Ø­Ø³Ø§Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…
            const today = new Date().toDateString();
            const todaySales = sales
                .filter(sale => new Date(sale.date).toDateString() === today)
                .reduce((sum, sale) => sum + sale.total, 0);

            // Ø­Ø³Ø§Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø±
            const thisMonth = new Date().getMonth();
            const thisYear = new Date().getFullYear();
            const monthSales = sales
                .filter(sale => {
                    const saleDate = new Date(sale.date);
                    return saleDate.getMonth() === thisMonth && saleDate.getFullYear() === thisYear;
                })
                .reduce((sum, sale) => sum + sale.total, 0);

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('todaySales').textContent = formatCurrency(todaySales);
            document.getElementById('monthSales').textContent = formatCurrency(monthSales);
            document.getElementById('totalProducts').textContent = products.length;
            document.getElementById('lowStockAlert').textContent = products.filter(p => p.movingStock <= (p.minStock || 5)).length;
            document.getElementById('activeCustomers').textContent = customers.length;
            document.getElementById('pendingInstallments').textContent = installmentSales.filter(s => s.status === 'active').length;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹
        function loadProductsForPOS() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';

            const filteredProducts = products.filter(p => 
                p.storeType === currentStoreType || currentStoreType === 'general'
            );

            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.onclick = () => addToCart(product);
                
                const stockStatus = product.movingStock <= 0 ? 'Ù†ÙØ° Ø§Ù„Ù…Ø®Ø²ÙˆÙ†' : 
                                  product.movingStock <= (product.minStock || 5) ? 'Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶' : 'Ù…ØªÙˆÙØ±';
                
                const stockClass = product.movingStock <= 0 ? 'status-cancelled' : 
                                 product.movingStock <= (product.minStock || 5) ? 'status-low-stock' : 'status-active';

                productCard.innerHTML = `
                    <div class="product-image">ğŸ“¦</div>
                    <h4>${product.name}</h4>
                    <p><strong>Ø§Ù„ÙØ¦Ø©:</strong> ${categoryStructure[product.mainCategory]?.name || product.mainCategory}</p>
                    <p><strong>Ø§Ù„Ø³Ø¹Ø±:</strong> <span class="currency">${formatCurrency(product.salePrice)}</span></p>
                    <p><strong>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†:</strong> ${product.movingStock}</p>
                    <span class="status-badge ${stockClass}">${stockStatus}</span>
                    ${product.brand ? `<p><strong>Ø§Ù„Ø¹Ù„Ø§Ù…Ø©:</strong> ${product.brand}</p>` : ''}
                `;

                productGrid.appendChild(productCard);
            });
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
        function addProduct() {
            const name = document.getElementById('productName').value.trim();
            const barcode = document.getElementById('productBarcode').value.trim() || generateBarcode();
            const mainCategory = document.getElementById('mainCategory').value;
            const subCategory = document.getElementById('subCategory').value;
            const brand = document.getElementById('productBrand').value.trim();
            const model = document.getElementById('productModel').value.trim();
            const costPrice = parseFloat(document.getElementById('costPrice').value) || 0;
            const salePrice = parseFloat(document.getElementById('salePrice').value) || 0;
            const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
            const fixedStock = parseInt(document.getElementById('fixedStock').value) || 0;
            const movingStock = parseInt(document.getElementById('movingStock').value) || 0;
            const minStock = parseInt(document.getElementById('minStock').value) || 5;
            const maxStock = parseInt(document.getElementById('maxStock').value) || 1000;
            const weight = parseFloat(document.getElementById('productWeight').value) || 0;
            const dimensions = document.getElementById('productDimensions').value.trim();
            const expiryDate = document.getElementById('expiryDate').value;
            const supplierId = document.getElementById('supplierId').value;
            const storageLocation = document.getElementById('storageLocation').value.trim();
            const status = document.getElementById('productStatus').value;
            const description = document.getElementById('productDescription').value.trim();
            const notes = document.getElementById('productNotes').value.trim();

            if (!name || !salePrice || !mainCategory) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }

            const product = {
                id: Date.now(),
                name,
                barcode,
                mainCategory,
                subCategory,
                brand,
                model,
                costPrice,
                salePrice,
                minPrice,
                fixedStock,
                movingStock,
                minStock,
                maxStock,
                weight,
                dimensions,
                expiryDate,
                supplierId,
                storageLocation,
                status,
                description,
                notes,
                storeType: currentStoreType,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            products.push(product);
            saveProducts();
            loadAllData();
            clearProductForm();
            updateDashboard();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
        function addCustomer() {
            const fullName = document.getElementById('customerFullName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const email = document.getElementById('customerEmail').value.trim();
            const birthdate = document.getElementById('customerBirthdate').value;
            const gender = document.getElementById('customerGender').value;
            const type = document.getElementById('customerType').value;
            const address = document.getElementById('customerAddress').value.trim();
            const notes = document.getElementById('customerNotes').value.trim();

            if (!fullName || !phone) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }

            const customer = {
                id: Date.now(),
                fullName,
                phone,
                email,
                birthdate,
                gender,
                type,
                address,
                notes,
                loyaltyPoints: 0,
                totalPurchases: 0,
                lastVisit: null,
                createdAt: new Date().toISOString()
            };

            customers.push(customer);
            saveCustomers();
            loadCustomersTable();
            clearCustomerForm();
            updateDashboard();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯
        function addSupplier() {
            const company = document.getElementById('supplierCompany').value.trim();
            const contact = document.getElementById('supplierContact').value.trim();
            const phone = document.getElementById('supplierPhone').value.trim();
            const email = document.getElementById('supplierEmail').value.trim();
            const taxNumber = document.getElementById('supplierTaxNumber').value.trim();
            const rating = document.getElementById('supplierRating').value;
            const address = document.getElementById('supplierAddress').value.trim();
            const notes = document.getElementById('supplierNotes').value.trim();

            if (!company || !phone) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }

            const supplier = {
                id: Date.now(),
                company,
                contact,
                phone,
                email,
                taxNumber,
                rating: parseInt(rating),
                address,
                notes,
                totalOrders: 0,
                lastOrder: null,
                createdAt: new Date().toISOString()
            };

            suppliers.push(supplier);
            saveSuppliers();
            loadSuppliersTable();
            clearSupplierForm();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©
        function addToCart(product) {
            if (product.movingStock <= 0) {
                showNotification('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', 'error');
                return;
            }

            const existingItem = cart.find(item => item.id === product.id);
            
            if (existingItem) {
                if (existingItem.quantity < product.movingStock) {
                    existingItem.quantity++;
                } else {
                    showNotification('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', 'error');
                    return;
                }
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.salePrice,
                    quantity: 1,
                    discount: 0,
                    maxStock: product.movingStock
                });
            }
            
            updateCartDisplay();
            showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©', 'success');
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø±Ø¨Ø©
        function updateCartDisplay() {
            const tbody = document.getElementById('cartItems');
            tbody.innerHTML = '';
            
            cart.forEach((item, index) => {
                const itemTotal = (item.price * item.quantity) * (1 - item.discount / 100);
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <button onclick="changeQuantity(${index}, -1)" class="btn btn-sm">-</button>
                            <span style="min-width: 30px; text-align: center;">${item.quantity}</span>
                            <button onclick="changeQuantity(${index}, 1)" class="btn btn-sm">+</button>
                        </div>
                    </td>
                    <td class="currency">${formatCurrency(item.price)}</td>
                    <td>
                        <input type="number" value="${item.discount}" min="0" max="100" 
                               onchange="updateItemDiscount(${index}, this.value)"
                               style="width: 70px;">%
                    </td>
                    <td class="currency">${formatCurrency(itemTotal)}</td>
                    <td><button onclick="removeFromCart(${index})" class="btn btn-danger btn-sm">ğŸ—‘ï¸</button></td>
                `;
            });
            
            updateCartTotal();
        }

        // ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø±Ø¨Ø©
        function updateCartTotal() {
            const subtotal = cart.reduce((sum, item) => 
                sum + (item.price * item.quantity * (1 - item.discount / 100)), 0);
            
            const discountRate = parseFloat(document.getElementById('totalDiscount').value) || 0;
            const taxRate = parseFloat(document.getElementById('taxRate').value) || 0;
            
            const discountAmount = subtotal * (discountRate / 100);
            const afterDiscount = subtotal - discountAmount;
            const taxAmount = afterDiscount * (taxRate / 100);
            const total = afterDiscount + taxAmount;

            document.getElementById('subtotal').textContent = formatCurrency(subtotal);
            document.getElementById('discountAmount').textContent = formatCurrency(discountAmount);
            document.getElementById('taxAmount').textContent = formatCurrency(taxAmount);
            document.getElementById('totalAmount').textContent = formatCurrency(total);
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù†Ù‚Ø¯ÙŠ
        function processCashSale() {
            if (cart.length === 0) {
                showNotification('Ø§Ù„Ø¹Ø±Ø¨Ø© ÙØ§Ø±ØºØ©', 'error');
                return;
            }

            const total = getTotalAmount();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            cart.forEach(cartItem => {
                const product = products.find(p => p.id === cartItem.id);
                if (product) {
                    product.movingStock -= cartItem.quantity;
                }
            });

            // ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø§Ø· ÙˆÙ„Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„
            if (selectedCustomer) {
                const customer = customers.find(c => c.id === selectedCustomer.id);
                if (customer) {
                    customer.loyaltyPoints += Math.floor(total / 1000); // Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ 1000 Ø¯.Ø¹
                    customer.totalPurchases += total;
                    customer.lastVisit = new Date().toISOString();
                }
            }

            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ¹
            const sale = {
                id: Date.now(),
                customerId: selectedCustomer?.id || null,
                customerName: selectedCustomer?.fullName || 'Ø¹Ù…ÙŠÙ„ Ù…Ø¬Ù‡ÙˆÙ„',
                items: [...cart],
                subtotal: getSubtotal(),
                discount: getTotalDiscount(),
                tax: getTaxAmount(),
                total: total,
                type: 'cash',
                date: new Date().toISOString(),
                cashier: 'Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…' // ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ«Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
            };

            sales.push(sale);
            localStorage.setItem('sales', JSON.stringify(sales));
            
            saveProducts();
            saveCustomers();
            loadAllData();
            clearCart();
            clearSelectedCustomer();
            updateDashboard();
            
            showNotification('ØªÙ… Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            printReceipt(sale);
        }

        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„
        function printReceipt(sale) {
            const receiptWindow = window.open('', '_blank');
            const receiptHTML = `
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¨ÙŠØ¹</title>
                    <style>
                        body { font-family: Arial; text-align: center; }
                        .receipt { max-width: 300px; margin: auto; }
                        .header { border-bottom: 1px solid #000; padding-bottom: 10px; }
                        .items { margin: 20px 0; }
                        .total { border-top: 1px solid #000; padding-top: 10px; font-weight: bold; }
                    </style>
                </head>
                <body>
                    <div class="receipt">
                        <div class="header">
                            <h2>${settings.storeName || 'Ù…ØªØ¬Ø±ÙŠ'}</h2>
                            <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(sale.date).toLocaleDateString('ar-IQ')}</p>
                            <p>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©: ${sale.id}</p>
                            <p>Ø§Ù„Ø¹Ù…ÙŠÙ„: ${sale.customerName}</p>
                        </div>
                        <div class="items">
                            ${sale.items.map(item => `
                                <div style="display: flex; justify-content: space-between;">
                                    <span>${item.name} Ã— ${item.quantity}</span>
                                    <span>${formatCurrency(item.price * item.quantity)}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="total">
                            <div style="display: flex; justify-content: space-between;">
                                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                                <span>${formatCurrency(sale.total)}</span>
                            </div>
                        </div>
                        <p>Ø´ÙƒØ±Ø§Ù‹ Ù„ØªØ³ÙˆÙ‚ÙƒÙ… Ù…Ø¹Ù†Ø§</p>
                    </div>
                </body>
                </html>
            `;
            receiptWindow.document.write(receiptHTML);
            receiptWindow.document.close();
            receiptWindow.print();
        }

        // Ù…Ø³Ø§Ø¹Ø¯Ø§Øª ÙˆÙˆØ¸Ø§Ø¦Ù Ø¹Ø§Ù…Ø©
        function formatCurrency(amount) {
            const currency = settings.currency || 'IQD';
            const symbol = currency === 'IQD' ? 'Ø¯.Ø¹' : 
                          currency === 'USD' ? '$' : 
                          currency === 'EUR' ? 'â‚¬' : 'Ø¯.Ø¹';
            return `${amount.toLocaleString()} ${symbol}`;
        }

        function generateBarcode() {
            return Date.now().toString() + Math.random().toString(36).substr(2, 9);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.background = 
                type === 'success' ? '#27ae60' : 
                type === 'error' ? '#e74c3c' : 
                type === 'warning' ? '#f39c12' : '#3498db';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveProducts() {
            localStorage.setItem('products', JSON.stringify(products));
        }

        function saveCustomers() {
            localStorage.setItem('customers', JSON.stringify(customers));
        }

        function saveSuppliers() {
            localStorage.setItem('suppliers', JSON.stringify(suppliers));
        }

        function saveSettings() {
            localStorage.setItem('settings', JSON.stringify(settings));
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¦Ø§Øª
        function loadCategories() {
            const categorySelects = ['mainCategory', 'categoryFilter', 'categoryFilterProducts'];
            categorySelects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    Object.keys(categoryStructure).forEach(key => {
                        const option = document.createElement('option');
                        option.value = key;
                        option.textContent = categoryStructure[key].name;
                        select.appendChild(option);
                    });
                }
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ©
        function updateSubCategories() {
            const mainCategory = document.getElementById('mainCategory').value;
            const subCategorySelect = document.getElementById('subCategory');
            
            subCategorySelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ©</option>';
            
            if (mainCategory && categoryStructure[mainCategory]) {
                categoryStructure[mainCategory].subcategories.forEach(sub => {
                    const option = document.createElement('option');
                    option.value = sub;
                    option.textContent = sub;
                    subCategorySelect.appendChild(option);
                });
            }
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function applySettings() {
            const savedSettings = localStorage.getItem('settings');
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
                
                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
                Object.keys(settings).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.value = settings[key];
                    }
                });
            }
        }

        // Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©...

        // Ø£Ø­Ø¯Ø§Ø« Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };

        // Ø­Ø³Ø§Ø¨ Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­
        function calculateProfitMargin() {
            const costPrice = parseFloat(document.getElementById('costPrice').value) || 0;
            const salePrice = parseFloat(document.getElementById('salePrice').value) || 0;
            
            if (costPrice > 0) {
                const margin = ((salePrice - costPrice) / costPrice) * 100;
                document.getElementById('profitMargin').value = margin.toFixed(2);
            }
        }

        // ØªØºÙŠÙŠØ± Ø§Ù„ÙƒÙ…ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ø±Ø¨Ø©
        function changeQuantity(index, change) {
            const item = cart[index];
            const newQuantity = item.quantity + change;
            
            if (newQuantity <= 0) {
                removeFromCart(index);
                return;
            }
            
            if (newQuantity > item.maxStock) {
                showNotification('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', 'error');
                return;
            }
            
            item.quantity = newQuantity;
            updateCartDisplay();
        }

        // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø¹Ø±Ø¨Ø©
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartDisplay();
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø¹Ø±Ø¨Ø©
        function clearCart() {
            cart = [];
            updateCartDisplay();
        }

        // ØªØ­Ø¯ÙŠØ« Ø®ØµÙ… Ø§Ù„Ø¹Ù†ØµØ±
        function updateItemDiscount(index, discount) {
            cart[index].discount = parseFloat(discount) || 0;
            updateCartDisplay();
        }

        // Ù…Ø³Ø­ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        function clearProductForm() {
            const form = document.querySelector('#products');
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.type === 'number') {
                    input.value = '0';
                } else {
                    input.value = '';
                }
            });
        }

        function clearCustomerForm() {
            const form = document.querySelector('#customers');
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => input.value = '');
        }

        function clearSupplierForm() {
            const form = document.querySelector('#suppliers');
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => input.value = '');
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function searchProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const productCards = document.querySelectorAll('.product-card');
            
            productCards.forEach(card => {
                const productName = card.querySelector('h4').textContent.toLowerCase();
                const isVisible = productName.includes(searchTerm) || searchTerm === '';
                card.style.display = isVisible ? 'block' : 'none';
            });
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
        function filterProductsByCategory() {
            const category = document.getElementById('categoryFilter').value;
            loadProductsForPOS();
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±
        function filterProductsByPrice() {
            const priceRange = document.getElementById('priceRange').value;
            const productCards = document.querySelectorAll('.product-card');
            
            productCards.forEach(card => {
                const priceText = card.querySelector('.currency').textContent;
                const price = parseFloat(priceText.replace(/[^\d.]/g, ''));
                let show = true;

                if (priceRange) {
                    if (priceRange === '0-50000') show = price < 50000;
                    else if (priceRange === '50000-200000') show = price >= 50000 && price <= 200000;
                    else if (priceRange === '200000-500000') show = price >= 200000 && price <= 500000;
                    else if (priceRange === '500000+') show = price > 500000;
                }

                card.style.display = show ? 'block' : 'none';
            });
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        function filterProductsByStock() {
            const stockFilter = document.getElementById('stockFilter').value;
            const productCards = document.querySelectorAll('.product-card');
            
            productCards.forEach(card => {
                const statusBadge = card.querySelector('.status-badge');
                let show = true;

                if (stockFilter === 'available') {
                    show = statusBadge.classList.contains('status-active');
                } else if (stockFilter === 'low') {
                    show = statusBadge.classList.contains('status-low-stock');
                } else if (stockFilter === 'out') {
                    show = statusBadge.classList.contains('status-cancelled');
                }

                card.style.display = show ? 'block' : 'none';
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        function loadProductsTable() {
            const tbody = document.getElementById('productsTableBody');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const row = tbody.insertRow();
                const stockStatus = product.movingStock <= 0 ? 'Ù†ÙØ°' : 
                                  product.movingStock <= (product.minStock || 5) ? 'Ù…Ù†Ø®ÙØ¶' : 'Ù…ØªÙˆÙØ±';
                
                const stockClass = product.movingStock <= 0 ? 'status-cancelled' : 
                                 product.movingStock <= (product.minStock || 5) ? 'status-low-stock' : 'status-active';

                row.innerHTML = `
                    <td><input type="checkbox" class="product-checkbox" value="${product.id}"></td>
                    <td>ğŸ“¦</td>
                    <td>${product.name}</td>
                    <td>${product.barcode || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                    <td>${categoryStructure[product.mainCategory]?.name || product.mainCategory || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                    <td class="currency">${formatCurrency(product.costPrice || 0)}</td>
                    <td class="currency">${formatCurrency(product.salePrice)}</td>
                    <td>${product.fixedStock}</td>
                    <td class="${product.movingStock <= (product.minStock || 5) ? 'low-stock' : ''}">${product.movingStock}</td>
                    <td><span class="status-badge ${stockClass}">${stockStatus}</span></td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editProduct(${product.id})" title="ØªØ¹Ø¯ÙŠÙ„">âœï¸</button>
                        <button class="btn btn-info btn-sm" onclick="duplicateProduct(${product.id})" title="Ù†Ø³Ø®">ğŸ“‹</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteProduct(${product.id})" title="Ø­Ø°Ù">ğŸ—‘ï¸</button>
                    </td>
                `;
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function loadCustomersTable() {
            const tbody = document.getElementById('customersTableBody');
            tbody.innerHTML = '';
            
            customers.forEach(customer => {
                const row = tbody.insertRow();
                const lastVisit = customer.lastVisit ? 
                    new Date(customer.lastVisit).toLocaleDateString('ar-IQ') : 'Ù„Ù… ÙŠØ²Ø± Ø¨Ø¹Ø¯';
                
                const customerType = customer.type === 'vip' ? 'Ù…Ù…ÙŠØ²' : 
                                   customer.type === 'wholesale' ? 'ØªØ§Ø¬Ø± Ø¬Ù…Ù„Ø©' : 'Ø¹Ø§Ø¯ÙŠ';

                row.innerHTML = `
                    <td>${customer.fullName}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.email || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                    <td><span class="badge badge-${customer.type === 'vip' ? 'warning' : customer.type === 'wholesale' ? 'info' : 'primary'}">${customerType}</span></td>
                    <td>${customer.loyaltyPoints || 0}</td>
                    <td class="currency">${formatCurrency(customer.totalPurchases || 0)}</td>
                    <td>${lastVisit}</td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editCustomer(${customer.id})" title="ØªØ¹Ø¯ÙŠÙ„">âœï¸</button>
                        <button class="btn btn-info btn-sm" onclick="viewCustomerHistory(${customer.id})" title="Ø§Ù„Ø³Ø¬Ù„">ğŸ“Š</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteCustomer(${customer.id})" title="Ø­Ø°Ù">ğŸ—‘ï¸</button>
                    </td>
                `;
            });
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
        function loadSuppliersTable() {
            const tbody = document.getElementById('suppliersTableBody');
            tbody.innerHTML = '';
            
            suppliers.forEach(supplier => {
                const row = tbody.insertRow();
                const stars = 'â­'.repeat(supplier.rating);
                const lastOrder = supplier.lastOrder ? 
                    new Date(supplier.lastOrder).toLocaleDateString('ar-IQ') : 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨ÙŠØ§Øª';

                row.innerHTML = `
                    <td>${supplier.company}</td>
                    <td>${supplier.contact || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                    <td>${supplier.phone}</td>
                    <td>${supplier.email || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</td>
                    <td>${stars}</td>
                    <td>${lastOrder}</td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editSupplier(${supplier.id})" title="ØªØ¹Ø¯ÙŠÙ„">âœï¸</button>
                        <button class="btn btn-info btn-sm" onclick="createPurchaseOrder(${supplier.id})" title="Ø·Ù„Ø¨ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©">ğŸ“‹</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteSupplier(${supplier.id})" title="Ø­Ø°Ù">ğŸ—‘ï¸</button>
                    </td>
                `;
            });
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„
        function openCustomerModal() {
            document.getElementById('customerModal').style.display = 'block';
            loadCustomersList();
        }

        // ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        function loadCustomersList() {
            const customersList = document.getElementById('customersList');
            customersList.innerHTML = '';
            
            customers.forEach(customer => {
                const customerCard = document.createElement('div');
                customerCard.className = 'product-card';
                customerCard.onclick = () => selectCustomer(customer);
                customerCard.innerHTML = `
                    <h4>${customer.fullName}</h4>
                    <p>ğŸ“ ${customer.phone}</p>
                    <p>ğŸ·ï¸ ${customer.type === 'vip' ? 'Ù…Ù…ÙŠØ²' : customer.type === 'wholesale' ? 'ØªØ§Ø¬Ø± Ø¬Ù…Ù„Ø©' : 'Ø¹Ø§Ø¯ÙŠ'}</p>
                    <p>â­ Ù†Ù‚Ø§Ø· Ø§Ù„ÙˆÙ„Ø§Ø¡: ${customer.loyaltyPoints || 0}</p>
                `;
                customersList.appendChild(customerCard);
            });
        }

        // Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„
        function selectCustomer(customer) {
            selectedCustomer = customer;
            document.getElementById('selectedCustomer').style.display = 'block';
            document.getElementById('customerName').textContent = customer.fullName;
            closeModal('customerModal');
            showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„: ${customer.fullName}`, 'success');
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø¯Ø¯
        function clearSelectedCustomer() {
            selectedCustomer = null;
            document.getElementById('selectedCustomer').style.display = 'none';
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
        function searchCustomers() {
            const searchTerm = document.getElementById('customerSearch').value.toLowerCase();
            const rows = document.querySelectorAll('#customersTableBody tr');
            
            rows.forEach(row => {
                const customerName = row.cells[0].textContent.toLowerCase();
                const customerPhone = row.cells[1].textContent.toLowerCase();
                const isVisible = customerName.includes(searchTerm) || customerPhone.includes(searchTerm);
                row.style.display = isVisible ? 'table-row' : 'none';
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        function searchCustomersModal() {
            const searchTerm = document.getElementById('customerModalSearch').value.toLowerCase();
            const customerCards = document.querySelectorAll('#customersList .product-card');
            
            customerCards.forEach(card => {
                const customerName = card.querySelector('h4').textContent.toLowerCase();
                const isVisible = customerName.includes(searchTerm) || searchTerm === '';
                card.style.display = isVisible ? 'block' : 'none';
            });
        }

        // Ø­ÙØ¸ ÙƒØ¹Ø±Ø¶ Ø³Ø¹Ø±
        function saveQuote() {
            if (cart.length === 0) {
                showNotification('Ø§Ù„Ø¹Ø±Ø¨Ø© ÙØ§Ø±ØºØ©', 'error');
                return;
            }

            const quote = {
                id: Date.now(),
                customerId: selectedCustomer?.id || null,
                customerName: selectedCustomer?.fullName || 'Ø¹Ù…ÙŠÙ„ Ù…Ø¬Ù‡ÙˆÙ„',
                items: [...cart],
                subtotal: getSubtotal(),
                discount: getTotalDiscount(),
                tax: getTaxAmount(),
                total: getTotalAmount(),
                status: 'pending',
                validUntil: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(), // ØµØ§Ù„Ø­ Ù„Ù…Ø¯Ø© 30 ÙŠÙˆÙ…
                createdAt: new Date().toISOString()
            };

            const quotes = JSON.parse(localStorage.getItem('quotes')) || [];
            quotes.push(quote);
            localStorage.setItem('quotes', JSON.stringify(quotes));

            showNotification('ØªÙ… Ø­ÙØ¸ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± Ø¨Ù†Ø¬Ø§Ø­', 'success');
            clearCart();
            clearSelectedCustomer();
        }

        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
        function showInstallmentModal() {
            if (cart.length === 0) {
                showNotification('Ø§Ù„Ø¹Ø±Ø¨Ø© ÙØ§Ø±ØºØ©', 'error');
                return;
            }

            if (!selectedCustomer) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            const total = getTotalAmount();
            document.getElementById('originalAmount').value = total;
            document.getElementById('installmentModal').style.display = 'block';
            
            // Ù…Ù„Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
            const modalContent = document.querySelector('#installmentModal .modal-content');
            modalContent.innerHTML = `
                <span class="close" onclick="closeModal('installmentModal')">&times;</span>
                <h2>ğŸ’³ Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</h2>
                
                <div class="card">
                    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
                    <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${selectedCustomer.fullName}</p>
                    <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${selectedCustomer.phone}</p>
                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${selectedCustomer.type === 'vip' ? 'Ù…Ù…ÙŠØ²' : 'Ø¹Ø§Ø¯ÙŠ'}</p>
                </div>

                <div class="grid">
                    <div class="form-group">
                        <label>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ</label>
                        <input type="number" id="originalAmount" value="${total}" readonly>
                    </div>
                    <div class="form-group">
                        <label>Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© (%)</label>
                        <input type="number" id="interestRate" value="${settings.defaultInterestRate || 4}" 
                               min="0" max="50" step="0.1" oninput="calculateInstallments()">
                    </div>
                    <div class="form-group">
                        <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· (Ø´Ù‡Ø±)</label>
                        <input type="number" id="installmentCount" value="${settings.defaultInstallments || 12}" 
                               min="1" max="60" oninput="calculateInstallments()">
                    </div>
                    <div class="form-group">
                        <label>Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ø¹ Ø§Ù„ÙØ§Ø¦Ø¯Ø©</label>
                        <input type="number" id="totalWithInterest" readonly>
                    </div>
                    <div class="form-group">
                        <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ</label>
                        <input type="number" id="monthlyPayment" readonly>
                    </div>
                    <div class="form-group">
                        <label>ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„ Ù‚Ø³Ø·</label>
                        <input type="date" id="firstPaymentDate" value="${new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]}">
                    </div>
                </div>

                <div id="installmentSchedule" class="installment-table"></div>
                
                <div style="margin-top: 20px;">
                    <button class="btn btn-success btn-lg" onclick="createInstallmentSale()">ğŸ’¾ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</button>
                    <button class="btn btn-danger" onclick="closeModal('installmentModal')">âŒ Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            `;

            calculateInstallments();
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
        function calculateInstallments() {
            const originalAmount = parseFloat(document.getElementById('originalAmount').value) || 0;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
            const installmentCount = parseInt(document.getElementById('installmentCount').value) || 1;

            const totalWithInterest = originalAmount + (originalAmount * interestRate / 100);
            const monthlyPayment = totalWithInterest / installmentCount;

            document.getElementById('totalWithInterest').value = totalWithInterest.toFixed(2);
            document.getElementById('monthlyPayment').value = monthlyPayment.toFixed(2);

            displayInstallmentSchedule(totalWithInterest, monthlyPayment, installmentCount);
        }

        // Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
        function displayInstallmentSchedule(totalAmount, monthlyPayment, count) {
            const scheduleDiv = document.getElementById('installmentSchedule');
            const firstPaymentDate = new Date(document.getElementById('firstPaymentDate').value || Date.now());
            
            let scheduleHTML = `
                <h4>ğŸ“… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø·:</h4>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ù‚Ø³Ø·</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            for (let i = 1; i <= count; i++) {
                const dueDate = new Date(firstPaymentDate);
                dueDate.setMonth(dueDate.getMonth() + i - 1);
                
                scheduleHTML += `
                    <tr>
                        <td>${i}</td>
                        <td>${dueDate.toLocaleDateString('ar-IQ')}</td>
                        <td class="currency">${formatCurrency(monthlyPayment)}</td>
                        <td><span class="status-badge status-pending">Ù…Ø¹Ù„Ù‚</span></td>
                    </tr>
                `;
            }

            scheduleHTML += '</tbody></table></div>';
            scheduleDiv.innerHTML = scheduleHTML;
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
        function createInstallmentSale() {
            const originalAmount = parseFloat(document.getElementById('originalAmount').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const installmentCount = parseInt(document.getElementById('installmentCount').value);
            const totalWithInterest = parseFloat(document.getElementById('totalWithInterest').value);
            const monthlyPayment = parseFloat(document.getElementById('monthlyPayment').value);
            const firstPaymentDate = document.getElementById('firstPaymentDate').value;

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
            const installments = [];
            const startDate = new Date(firstPaymentDate);
            
            for (let i = 1; i <= installmentCount; i++) {
                const dueDate = new Date(startDate);
                dueDate.setMonth(dueDate.getMonth() + i - 1);
                
                installments.push({
                    number: i,
                    amount: monthlyPayment,
                    dueDate: dueDate.toISOString(),
                    paid: false,
                    paidDate: null,
                    paidAmount: 0,
                    status: 'pending'
                });
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            cart.forEach(cartItem => {
                const product = products.find(p => p.id === cartItem.id);
                if (product) {
                    product.movingStock -= cartItem.quantity;
                }
            });

            // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
            const customer = customers.find(c => c.id === selectedCustomer.id);
            if (customer) {
                customer.totalPurchases += totalWithInterest;
                customer.lastVisit = new Date().toISOString();
            }

            // Ø­ÙØ¸ Ø¨ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
            const installmentSale = {
                id: Date.now(),
                customerId: selectedCustomer.id,
                customerName: selectedCustomer.fullName,
                customerPhone: selectedCustomer.phone,
                items: [...cart],
                originalAmount,
                interestRate,
                totalWithInterest,
                monthlyPayment,
                installmentCount,
                installments,
                totalPaid: 0,
                remainingAmount: totalWithInterest,
                createdDate: new Date().toISOString(),
                status: 'active',
                cashier: 'Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…'
            };

            installmentSales.push(installmentSale);
            localStorage.setItem('installmentSales', JSON.stringify(installmentSales));

            saveProducts();
            saveCustomers();
            loadAllData();
            clearCart();
            clearSelectedCustomer();
            updateDashboard();
            closeModal('installmentModal');

            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø¨Ù†Ø¬Ø§Ø­', 'success');
            printInstallmentContract(installmentSale);
        }

        // Ø·Ø¨Ø§Ø¹Ø© Ø¹Ù‚Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·
        function printInstallmentContract(installmentSale) {
            const contractWindow = window.open('', '_blank');
            const contractHTML = `
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>Ø¹Ù‚Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</title>
                    <style>
                        body { font-family: Arial; margin: 20px; line-height: 1.6; }
                        .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 20px; }
                        .content { margin: 20px 0; }
                        .signature { margin-top: 50px; display: flex; justify-content: space-between; }
                        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        th, td { border: 1px solid #000; padding: 10px; text-align: center; }
                        th { background: #f0f0f0; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Ø¹Ù‚Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ø·</h1>
                        <h2>${settings.storeName || 'Ù…ØªØ¬Ø±ÙŠ'}</h2>
                        <p>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù‚Ø¯: ${installmentSale.id}</p>
                        <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(installmentSale.createdDate).toLocaleDateString('ar-IQ')}</p>
                    </div>
                    
                    <div class="content">
                        <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:</h3>
                        <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${installmentSale.customerName}</p>
                        <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${installmentSale.customerPhone}</p>
                        
                        <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨ÙŠØ¹:</h3>
                        <table>
                            <thead>
                                <tr><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th></tr>
                            </thead>
                            <tbody>
                                ${installmentSale.items.map(item => `
                                    <tr>
                                        <td>${item.name}</td>
                                        <td>${item.quantity}</td>
                                        <td>${formatCurrency(item.price)}</td>
                                        <td>${formatCurrency(item.price * item.quantity)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        
                        <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø£ØµÙ„ÙŠ:</strong> ${formatCurrency(installmentSale.originalAmount)}</p>
                        <p><strong>Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø©:</strong> ${installmentSale.interestRate}%</p>
                        <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> ${formatCurrency(installmentSale.totalWithInterest)}</p>
                        <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ø·:</strong> ${installmentSale.installmentCount} Ù‚Ø³Ø·</p>
                        <p><strong>Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ:</strong> ${formatCurrency(installmentSale.monthlyPayment)}</p>
                        
                        <h3>Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ø·:</h3>
                        <table>
                            <thead>
                                <tr><th>Ø±Ù‚Ù… Ø§Ù„Ù‚Ø³Ø·</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr>
                            </thead>
                            <tbody>
                                ${installmentSale.installments.map(inst => `
                                    <tr>
                                        <td>${inst.number}</td>
                                        <td>${new Date(inst.dueDate).toLocaleDateString('ar-IQ')}</td>
                                        <td>${formatCurrency(inst.amount)}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="signature">
                        <div>
                            <p>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„</p>
                            <p>_________________</p>
                        </div>
                        <div>
                            <p>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ØªØ¬Ø±</p>
                            <p>_________________</p>
                        </div>
                    </div>
                </body>
                </html>
            `;
            contractWindow.document.write(contractHTML);
            contractWindow.document.close();
            contractWindow.print();
        }

        // Ø­Ø°Ù Ù…Ù†ØªØ¬
        function deleteProduct(productId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
                products = products.filter(p => p.id !== productId);
                saveProducts();
                loadAllData();
                updateDashboard();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ø­Ø°Ù Ø¹Ù…ÙŠÙ„
        function deleteCustomer(customerId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ')) {
                customers = customers.filter(c => c.id !== customerId);
                saveCustomers();
                loadCustomersTable();
                updateDashboard();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ø­Ø°Ù Ù…ÙˆØ±Ø¯
        function deleteSupplier(supplierId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ±Ø¯ØŸ')) {
                suppliers = suppliers.filter(s => s.id !== supplierId);
                saveSuppliers();
                loadSuppliersTable();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ù†Ø³Ø® Ù…Ù†ØªØ¬
        function duplicateProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const newProduct = {
                    ...product,
                    id: Date.now(),
                    name: product.name + ' (Ù†Ø³Ø®Ø©)',
                    barcode: generateBarcode(),
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                products.push(newProduct);
                saveProducts();
                loadProductsTable();
                showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
        function updateStoreSettings() {
            currentStoreType = document.getElementById('storeType').value;
            loadProductsForPOS();
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø¬Ù…ÙŠØ¹ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.product-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ†
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const isActive = content.classList.contains('active');
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ†Ø§Øª
            document.querySelectorAll('.accordion-content').forEach(acc => {
                acc.classList.remove('active');
            });
            
            // ÙØªØ­ Ø§Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ† Ø§Ù„Ù…Ø­Ø¯Ø¯ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙØªÙˆØ­Ø§Ù‹
            if (!isActive) {
                content.classList.add('active');
            }
        }

        // Ø¹Ø±Ø¶ ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        function showSettingsTab(tabName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
            document.querySelectorAll('.settings-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.tab-secondary').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
            document.getElementById(tabName + '-settings').classList.add('active');
            event.target.classList.add('active');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
        function showQuickActions() {
            const actions = [
                'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø³Ø±ÙŠØ¹',
                'Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†',
                'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©',
                'Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø³Ø±ÙŠØ¹',
                'Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©',
                'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø³Ø±ÙŠØ¹Ø©'
            ];
            
            const actionsList = actions.map(action => `<li onclick="executeQuickAction('${action}')">${action}</li>`).join('');
            
            showNotification(`
                <div style="background: white; color: black; padding: 15px; border-radius: 10px; max-width: 300px;">
                    <h4>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h4>
                    <ul style="list-style: none; padding: 0;">
                        ${actionsList}
                    </ul>
                </div>
            `, 'info');
        }

        // ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡ Ø³Ø±ÙŠØ¹
        function executeQuickAction(action) {
            switch(action) {
                case 'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø³Ø±ÙŠØ¹':
                    showTab('products');
                    break;
                case 'Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†':
                    showTab('inventory');
                    break;
                case 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©':
                    showTab('sales');
                    break;
                case 'Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø³Ø±ÙŠØ¹':
                    generateQuickReport();
                    break;
                case 'Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©':
                    createBackup();
                    break;
                case 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø³Ø±ÙŠØ¹Ø©':
                    showTab('settings');
                    break;
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø³Ø±ÙŠØ¹
        function generateQuickReport() {
            const today = new Date().toDateString();
            const todaySales = sales.filter(sale => new Date(sale.date).toDateString() === today);
            const todayRevenue = todaySales.reduce((sum, sale) => sum + sale.total, 0);
            const lowStockProducts = products.filter(p => p.movingStock <= (p.minStock || 5));
            
            const reportWindow = window.open('', '_blank');
            reportWindow.document.write(`
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ø±ÙŠØ¹</title>
                    <style>
                        body { font-family: Arial; margin: 20px; }
                        .stat { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
                    </style>
                </head>
                <body>
                    <h1>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ø±ÙŠØ¹ - ${new Date().toLocaleDateString('ar-IQ')}</h1>
                    <div class="stat">
                        <h3>Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…: ${formatCurrency(todayRevenue)}</h3>
                        <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ${todaySales.length}</p>
                    </div>
                    <div class="stat">
                        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${products.length}</h3>
                        <p>Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶: ${lowStockProducts.length}</p>
                    </div>
                    <div class="stat">
                        <h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡: ${customers.length}</h3>
                        <p>Ø£Ù‚Ø³Ø§Ø· Ù†Ø´Ø·Ø©: ${installmentSales.filter(s => s.status === 'active').length}</p>
                    </div>
                </body>
                </html>
            `);
            reportWindow.document.close();
            reportWindow.print();
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        function createBackup() {
            const backupData = {
                products,
                customers,
                suppliers,
                sales,
                installmentSales,
                returns,
                expenses,
                settings,
                timestamp: new Date().toISOString(),
                version: '2.0'
            };

            const blob = new Blob([JSON.stringify(backupData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `backup_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);

            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹
        function getSubtotal() {
            return cart.reduce((sum, item) => sum + (item.price * item.quantity * (1 - item.discount / 100)), 0);
        }

        function getTotalDiscount() {
            const subtotal = getSubtotal();
            const discountRate = parseFloat(document.getElementById('totalDiscount').value) || 0;
            return subtotal * (discountRate / 100);
        }

        function getTaxAmount() {
            const afterDiscount = getSubtotal() - getTotalDiscount();
            const taxRate = parseFloat(document.getElementById('taxRate').value) || 0;
            return afterDiscount * (taxRate / 100);
        }

        function getTotalAmount() {
            return getSubtotal() - getTotalDiscount() + getTaxAmount();
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
        document.addEventListener('change', function(e) {
            if (e.target.closest('#settings')) {
                const setting = e.target.id;
                const value = e.target.value;
                settings[setting] = value;
                saveSettings();
                showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'success');
            }
        });

        // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù„Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 'n': // Ctrl+N Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                        e.preventDefault();
                        showTab('products');
                        break;
                    case 's': // Ctrl+S Ù„Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø±ÙŠØ¹
                        e.preventDefault();
                        createBackup();
                        break;
                    case 'f': // Ctrl+F Ù„Ù„Ø¨Ø­Ø«
                        e.preventDefault();
                        document.getElementById('productSearch').focus();
                        break;
                }
            }
        });

    </script>
</body>
</html>
